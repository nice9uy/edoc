{% extends 'base_index.html' %}
{% load static %}

{% block index %}

 
{% include 'partials/header.html' %}


<div class="container-fluid mt-3 text-white" style="">
    
    <h5 class="text-center">DATA SEMUA SURAT</h5>

    {% if user.is_active  and user.is_superuser %}

    <div class="col-2 mb-2 ">
      <div style="margin-top: -2.5rem;">
        <select class="form-select form-select-sm" title="Filter User" required aria-label="Default select example" name="surat">
          <option value="">USER</option>
          <option value="Masuk">Masuk</option>
          <option value="Keluar">Keluar</option>
        </select>
      </div>
    </div>

    <div style="margin-top: -2.5rem; margin-left: 60rem;">
      <div class="d-flex gap-2 col-12 mb-2" >
          <select class="form-select form-select-sm" title="Filter Surat" required aria-label="Default select example" name="surat">
            <option value="">SURAT</option>
            <option value="Masuk">Masuk</option>
            <option value="Keluar">Keluar</option>
          </select>

          <select class="form-select form-select-sm" title="Filter Klasifikasi" required aria-label="Default select example" name="klasifikasi">
            <option value="">KLASIFIKASI </option>
            {% for v in klasifikasi %}
            <option value="{{ v }}">{{v}}</option>
            {% endfor %}
          </select>

          <select class="form-select form-select-sm" title="Filter Kelompok" required aria-label="Default select example" name="kelompok">
            <option value="">KELOMPOK </option>
            {% for v in kelompok %}
            <option value="{{ v }}">{{v}}</option>
            {% endfor %}
          </select>
        </div> 
      </div>
  
      <table id="tabel_index" class="table table-striped table-bordered text-white " style="width:100%;  " >
          <thead>
              <tr>
                  <th class="text-center">Surat</th>
                  <th class="text-center">Klasifikasi</th>
                  <th class="text-center">Kelompok</th>
                  <th class="text-center">Tanggal</th>
                  <th class="text-center">No Surat</th>
                  <th class="text-center">Kepada</th>
                  <th class="text-center">Prihal</th>
                  <th class="text-center">Files</th>
          </thead>
          <tbody>
                  {% for data in datasemuasurat_admin %}
                  <tr>
                        <td>{{ data.surat }}</td>
                        <td>{{ data.klasifikasi }}</td>
                        <td>{{ data.kelompok }}</td>
                        <td>{{ data.tgl | date:"d M Y"}}</td>
                        <td>{{ data.no_surat }}</td>
                        <td>{{ data.kepada }}</td>
                        <td>{{ data.perihal }}</td>
                        <td class="d-flex justify-content-center"> 
                            <div style="margin-left: -15px;">
                              <a class="fa fa-file-pdf-o" aria-current="page" title="Files"  target="_blank" href="/upload/{{ data.upload_file }}"></a> 
                            </div>
                        </td>
                  </tr>
                  {% endfor %}
          </tbody>
      </table>


    {% else %}

        <div style="margin-top: -2.5rem; margin-left: 60rem;">
          <div class="d-flex gap-2 col-12 mb-2" >
              <select class="form-select form-select-sm" title="Filter Surat" required aria-label="Default select example" name="surat">
                <option value="">SURAT</option>
                <option value="Masuk">Masuk</option>
                <option value="Keluar">Keluar</option>
              </select>

              <select class="form-select form-select-sm" title="Filter Klasifikasi" required aria-label="Default select example" name="klasifikasi">
                <option value="">KLASIFIKASI </option>
                {% for v in klasifikasi %}
                <option value="{{ v }}">{{v}}</option>
                {% endfor %}
              </select>

              <select class="form-select form-select-sm" title="Filter Kelompok" required aria-label="Default select example" name="kelompok">
                <option value="">KELOMPOK </option>
                {% for v in kelompok %}
                <option value="{{ v }}">{{v}}</option>
                {% endfor %}
              </select>
            </div> 
          </div>
      
          <table id="tabel_index" class="table table-striped table-bordered text-white " style="width:100%;  " >
              <thead>
                  <tr>
                      <th class="text-center">Surat</th>
                      <th class="text-center">Klasifikasi</th>
                      <th class="text-center">Kelompok</th>
                      <th class="text-center">Tanggal</th>
                      <th class="text-center">No Surat</th>
                      <th class="text-center">Kepada</th>
                      <th class="text-center">Prihal</th>
                      <th class="text-center">Files</th>
              </thead>
              <tbody>
                      {% for data in datasemuasurat %}
                      <tr>
                            <td>{{ data.surat }}</td>
                            <td>{{ data.klasifikasi }}</td>
                            <td>{{ data.kelompok }}</td>
                            <td>{{ data.tgl | date:"d M Y"}}</td>
                            <td>{{ data.no_surat }}</td>
                            <td>{{ data.kepada }}</td>
                            <td>{{ data.perihal }}</td>
                            <td class="d-flex justify-content-center"> 
                                <div style="margin-left: -15px;">
                                  <a class="fa fa-file-pdf-o" aria-current="page" title="Files"  target="_blank" href="/upload/{{ data.upload_file }}"></a> 
                                </div>
                            </td>
                      </tr>
                      {% endfor %}
              </tbody>
          </table>

    {% endif %}
    
</div>

<div class="container">
    <footer class="">
        <p class="text-center text-muted">&copy; 2023 - {% now "Y" %}  e-doc - Baranahan</p>
    </footer>
</div>

{% endblock index %}



