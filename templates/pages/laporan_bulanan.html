{% extends 'base_index.html' %} 
{% load static %} 


{% block laporan_bulanan %}

{%include 'partials/header_laporan.html' %}


<div class="container-fluid mt-5">
    <h3 class="text-center">LAPORAN BULANAN</h3>
    <div class="">
        <div class="d-flex mt-5 align-content-center ">
            <canvas id="laporan_bulanan" style="width:100%;max-width:1000px; max-height: 1000px;"></canvas>

            <div class="d-flex flex-column">
                <div class="d-flex flex-row gap-3">
                    <select class="form-select" id="bulan" required name="bulan">
                        <option value="">BULAN</option>
                        <option value="1" >Januari</option>
                        <option value="2">Februari</option>
                        <option value="3">Maret</option>
                        <option value="4">April</option>
                        <option value="5">Mei</option>
                        <option value="6">Juni</option>
                        <option value="7">Juli</option>
                        <option value="8">Agustus</option>
                        <option value="9">September</option>
                        <option value="10">Oktober</option>
                        <option value="11">Nopember</option>
                        <option value="12">Desember</option>

                    </select>  
                    <select class="form-select" id="tahun" required name="tahun">
                        <option value="">TAHUN</option>
                        {% for thn in tahun_data %}
                        
                            <option value="{{ thn }}" >{{ thn  }}</option>
                        
                        {% endfor %}
                    </select>  
                </div>
                <button class="btn btn-primary mt-3">Proses</button>
                
                <div class="mt-5">
                    {% for key, val  in jumlah.items  %}
                        <h5>{{ key }} = {{  val }} </h5>  
                    {% empty %}
                        <h5>Tidak ada data masuk Bulan ini</h5>
                    {% endfor %}  
                </div>
            </div>
        </div>
    </div>
</div>
 

<script>
    const ctx = document.getElementById("laporan_bulanan").getContext("2d"); 
    var myChart = new Chart(ctx, {
        type: "bar",
        data: {
            labels: {{ label | safe }},
            datasets: [
            {
                label: 'Surat Masuk',
                data   :  {{ y_masuk | safe }},
                backgroundColor: 'red',
            },
            {
                label: 'Surat Keluar',
                data   :  {{ y_keluar | safe }},
                backgroundColor: 'blue',
            }]
        },
        options: { 
            responsive: true,
            legend : {
                display : true,
                labels : {
                    fontColor : "white",
                },
            },
            scales: {
                yAxes: [{
                    ticks: {
                        fontColor: "white",
                        fontSize: 14,
                        beginAtZero: true,
                        stepSize : 1,
                    }
                }],
                xAxes: [{
                    ticks: {
                        fontColor: "white",
                        fontSize: 14,
                        beginAtZero: true
                    }
                }]
            }
        }
    });
</script>




{% endblock laporan_bulanan %}